<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>Feedex Web App</title>
		<%= include_gon %>
		<meta name="description" content="Responsive Animated Border Menus with CSS Transitions" />
		<meta name="keywords" content="navigation, menu, responsive, border, overlay, css transition" />
		<meta name="author" content="Codrops" />
		<link rel="shortcut icon" href="../favicon.ico">
		<%= csrf_meta_tag %>

		<%= stylesheet_link_tag "two/normalize.css" %>
		<%= stylesheet_link_tag "two/demo.css" %>
		<%= stylesheet_link_tag "two/icons.css" %>
		<%= stylesheet_link_tag "two/idangerous.swiper.css" %>
		<%= stylesheet_link_tag "two/style5.css" %>
		<%= stylesheet_link_tag "two/stylemain.css" %>

		
		<%= javascript_include_tag "jquery", "jquery_ujs" %>
		<%= javascript_include_tag "two/modernizr.custom.js" %>
		<%= javascript_include_tag "two/idangerous.swiper-2.1.min.js" %>



	</head>
	<body>
		<div id="container">

				<div id="maincontent">
				<div id="header"><h1>LUNCH MENU</h1><div id="cartbutton">

				<%= link_to @cart do %>
				<span id="cart-count"><%= @cart.line_items.count %>&nbsp;&nbsp;</span>
				<%= image_tag("icon_cart.png") %>
				<% end %>


				</div></div>

		<div id="mainmenu">


		
  <div id="carousel1wrapper">
    <div id="carousel1" class="swiper-container">

    	<span class="next swipeButton"></span>

		<span class="prev swipeButton"></span>


      <div class="swiper-wrapper">
      	<% @main_items.each_with_index do |main_item, index| %>
			<div class="swiper-slide"><%= image_tag main_item.image.url %></div>
		<% end %>
      </div>
      

      
    

    <div class="pagination"></div>
  </div></div>

  <%= image_tag("icon_plus.png", id: "plusicon") %>

			



<div id="carousel2wrapper">

<div id="carousel2" class="swiper-container">

    	<span class="next swipeButton"></span>

		<span class="prev swipeButton"></span>


      <div class="swiper-wrapper">
        <% @side_items.each_with_index do |side_item, index| %>
			<div class="swiper-slide"><%= image_tag side_item.image.url %></div>
		<% end %>
        
        </div>
      

      
    

    <div class="pagination"></div>
  </div></div>

			</div>




			<div id="footer">

			<% #button_to 'Add to Cart', line_items_path(line_item: { main_id: 1, side_id: 1}), remote: true %>





				
			<div id="xiaomao"><a href='#'>
			<div id="addtocartbg"></div>		

			<div id="addtocart">


				<h1>ADD TO CART</h1>

			</div><!--add to cart end-->	

			<div id="addprice">
					
					<h1 id="money-display">$6.00</h1>

			</div></a></div>


		</div><!--end of footer-->





</div><!--end of mainmenu-->













			
			<nav id="bt-menu" class="bt-menu">
				<a href="#" class="bt-menu-trigger"><span>Menu</span></a>

				<ul>
					<li>
					<%= image_tag("fdxlogo.png", id: "fdxlogo") %>
					</li><br><br>
					<li id="btfirstli"><a href="/menus">
					<%= image_tag("icon_menu.png", class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;TODAY'S MENU</span></a></li>
					<li><a href="/wallet">
					<%= image_tag("icon_money.png", class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;	MY WALLET</span></a></li>
					<li><a href="settings.html">
					<%= image_tag("icon_settings.png", class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;	SETTINGS</span></a></li>
					<li><a href="login.html">
					<%= image_tag("icon_logout.png", class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;	LOGOUT</span></a></li>
				
				</ul>
				<!--<ul>
					<li><a href="http://www.twitter.com/codrops" class="bt-icon icon-twitter">Twitter</a></li>
					<li><a href="https://plus.google.com/101095823814290637419" class="bt-icon icon-gplus">Google+</a></li>
					<li><a href="http://www.facebook.com/pages/Codrops/159107397912" class="bt-icon icon-facebook">Facebook</a></li>
					<li><a href="https://github.com/codrops" class="bt-icon icon-github">icon-github</a></li>
				</ul>-->
			</nav>

			<div id="navshowbg">
			</div>	
			<div id="navshow">

				<ul id="#navshowul">
					<li>
					<%= image_tag('fdxlogo.png', id: "fdxlogo2") %>

					</li><br><br><br><br><br>
					<li><a href="/menus">
					<%= image_tag('icon_menu.png', class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;TODAY'S MENU</span></a></li>
					<li><a href="/wallet">
					<%= image_tag('icon_money.png', class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;	MY WALLET</span></a></li>
					<li><a href="settings.html">
					<%= image_tag('icon_settings.png', class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;	SETTINGS</span></a></li>

					<li>

					<%= link_to signout_path, method: "delete" do %>
					<%= image_tag('icon_logout.png', class: "menuimg") %>
					<span>&nbsp;&nbsp;&nbsp;	LOGOUT</span>
					<% end %>


					</li>
				
				</ul>



			</div>	







			









		</div><!-- /container -->
	</body>

	<script type="text/javascript">/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */

/*jshint browser: true, strict: true, undef: true */
/*global define: false */

( function( window ) {

'use strict';

// class helper functions from bonzo https://github.com/ded/bonzo

function classReg( className ) {
  return new RegExp("(^|\\s+)" + className + "(\\s+|$)");
}

// classList support for class management
// altho to be fair, the api sucks because it won't accept multiple classes at once
var hasClass, addClass, removeClass;

if ( 'classList' in document.documentElement ) {
  hasClass = function( elem, c ) {
    return elem.classList.contains( c );
  };
  addClass = function( elem, c ) {
    elem.classList.add( c );
  };
  removeClass = function( elem, c ) {
    elem.classList.remove( c );
  };
}
else {
  hasClass = function( elem, c ) {
    return classReg( c ).test( elem.className );
  };
  addClass = function( elem, c ) {
    if ( !hasClass( elem, c ) ) {
      elem.className = elem.className + ' ' + c;
    }
  };
  removeClass = function( elem, c ) {
    elem.className = elem.className.replace( classReg( c ), ' ' );
  };
}

function toggleClass( elem, c ) {
  var fn = hasClass( elem, c ) ? removeClass : addClass;
  fn( elem, c );
}

var classie = {
  // full names
  hasClass: hasClass,
  addClass: addClass,
  removeClass: removeClass,
  toggleClass: toggleClass,
  // short names
  has: hasClass,
  add: addClass,
  remove: removeClass,
  toggle: toggleClass
};

// transport
if ( typeof define === 'function' && define.amd ) {
  // AMD
  define( classie );
} else {
  // browser global
  window.classie = classie;
}

})( window );
</script>

<script type="text/javascript">
	/**
 * borderMenu.js v1.0.0
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2013, Codrops
 * http://www.codrops.com
 */
(function() {

 	// http://stackoverflow.com/a/11381730/989439
	function mobilecheck() {
		var check = false;
		(function(a){if(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
		return check;
	}

	function init() {

		var menu = document.getElementById( 'bt-menu' ),
			trigger = menu.querySelector( 'a.bt-menu-trigger' ),
			// triggerPlay only for demo 6
			triggerPlay = document.querySelector( 'a.bt-menu-trigger-out' ),
			// event type (if mobile use touch events)
			eventtype = mobilecheck() ? 'touchstart' : 'click',
			resetMenu = function() {
				classie.remove( menu, 'bt-menu-open' );
				classie.add( menu, 'bt-menu-close' );
			},
			closeClickFn = function( ev ) {
				resetMenu();
				overlay.removeEventListener( eventtype, closeClickFn );
			};

		var overlay = document.createElement('div');
		overlay.className = 'bt-overlay';
		menu.appendChild( overlay );

		trigger.addEventListener( eventtype, function( ev ) {
			ev.stopPropagation();
			ev.preventDefault();
			
			if( classie.has( menu, 'bt-menu-open' ) ) {
				resetMenu();
			}
			else {
				classie.remove( menu, 'bt-menu-close' );
				classie.add( menu, 'bt-menu-open' );
				overlay.addEventListener( eventtype, closeClickFn );
			}
		});

		if( triggerPlay ) {
			triggerPlay.addEventListener( eventtype, function( ev ) {
				ev.stopPropagation();
				ev.preventDefault();

				classie.remove( menu, 'bt-menu-close' );
				classie.add( menu, 'bt-menu-open' );
				overlay.addEventListener( eventtype, closeClickFn );
			});
		}

	}

	init();

})();
</script>


	<script>

	window.firstSwiparIndex = 0;
	window.secondSwiparIndex = 0;

	window.cartItems = gon.cart_number;

  var carousel1 = new Swiper('#carousel1.swiper-container',{
    pagination: '.pagination',
    loop:true,
    grabCursor: true,
    paginationClickable: true,
    onSlideChangeEnd: function(swiper) {
    	window.firstSwiparIndex = swiper.activeLoopIndex;

    	window.mainPrice = gon.main_items[window.firstSwiparIndex]["price"];
    	window.sidePrice = gon.side_items[window.secondSwiparIndex]["price"];

    	var totalPrice = Number(window.mainPrice) + Number(window.sidePrice);

    	$("#money-display").text("$" + totalPrice.toFixed(2).toString());
    }
  });


  $('#carousel1 .prev').on('click', function(e){
    e.preventDefault()
    carousel1.swipePrev()
  })
  $('#carousel1 .next').on('click', function(e){
    e.preventDefault()
    carousel1.swipeNext()
  })



    var carousel2 = new Swiper('#carousel2.swiper-container',{
    pagination: '.pagination',
    loop:true,
    grabCursor: true,
    paginationClickable: true,
    onSlideChangeEnd: function(swiper) {
    	window.secondSwiparIndex = swiper.activeLoopIndex;

    	window.mainPrice = gon.main_items[window.firstSwiparIndex]["price"];
    	window.sidePrice = gon.side_items[window.secondSwiparIndex]["price"];

    	var totalPrice = Number(window.mainPrice) + Number(window.sidePrice);

    	$("#money-display").text("$" + totalPrice.toFixed(2).toString());
    }
   
  })

    window.mainPrice = gon.main_items[window.firstSwiparIndex]["price"];
    window.sidePrice = gon.side_items[window.secondSwiparIndex]["price"];

    var totalPrice = Number(window.mainPrice) + Number(window.sidePrice);

    $("#money-display").text("$" + totalPrice.toFixed(2).toString());


  $('#carousel2 .prev').on('click', function(e){
    e.preventDefault()
    carousel2.swipePrev()
  })
  $('#carousel2 .next').on('click', function(e){
    e.preventDefault()
    carousel2.swipeNext()
  })

  $('#xiaomao').on('click', function(e){

  	e.preventDefault();
  	$.post('/line_items', { line_item : { main_id: window.firstSwiparIndex, side_id: window.secondSwiparIndex }}, function(returnedData) {
  		// Increment counter
  		window.cartItems = window.cartItems + 1;
  		$("#cart-count").text(window.cartItems.toString());

  	});


  });



  function mediaqueryresponse(mql){
		 if (mql.matches){ // if 900px and bigger
		  
			$('.bt-menu-trigger').hide();
			
		 }
		 else{
		  	
		$('.bt-menu-trigger').show();


		 }
		}

		var mql = window.matchMedia("(min-width: 700px)")
		mediaqueryresponse(mql) // call listener function explicitly at run time
		mql.addListener(mediaqueryresponse) // attach listener function to listen in on state changes
			
  </script>
</html>