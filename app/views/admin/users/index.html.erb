<div id="allitems">
	<h1>All Users</h1><hr />
	<h3><%= link_to "Export CSV", admin_users_path(format: "csv") %></h3>
	
	<%= link_to raw(image_tag('addnewbutton.png')), new_admin_user_path, class: 'addnew' %>

	<%= form_tag admin_users_path, method: :get do %>
		<%= text_field_tag :search, params[:search], placeholder: "Enter User Email / Name" %>
		<%= submit_tag "Search", :name => nil, value: "Search",style: "background-color:#282828;color:#FFF;text-indent:0px !important; font-size:1.0em;" %>
	<% end %>

	<%= form_tag admin_users_path, method: :get, id: 'sort_users' do %>
		<% if params[:sort].present? %>
			<%= select_tag "sort", options_for_select(["Name", "Email"]), selected: params[:sort], class: "sortusersdropdown" %>
		<% else %>
			<%= select_tag "sort", options_for_select(["Name", "Email"]), prompt: "Sort By", class: "sortusersdropdown" %>
		<% end %>
	<% end %>
	<%= link_to "Clear Search", admin_users_path %>

	<%= paginate @users %>
	<table width="100%">
	
		<tr>
			<th>User Name</th>
			<th>Email</th>
			<th>Colony</th>	
			<th>Credits</th>
			<th>Edit Credits</th>
		</tr>
		<% @users.each do |user| %>
			<tr class="<%= cycle('oddrow', 'evenrow') %>">
				<td><%= link_to user.name, edit_admin_user_path(user) %></td>
				<td><%= user.email %></td>
				<td><%= user.colony.name %></td>
				<td><%= user.total_credits %></td>
				<td><%= link_to raw(image_tag('editcreditbutton.png')), credits_admin_user_path(user) %></td>
			</tr>
		<% end %>
	</table>
	<br><br>
	<%= paginate @users %>
</div>

<script>
	$('select#sort').change(function(){
		$('form#sort_users').submit();
	});
</script>
